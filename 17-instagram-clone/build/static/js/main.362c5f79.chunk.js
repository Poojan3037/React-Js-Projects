(this["webpackJsonp17-instagram-clone"]=this["webpackJsonp17-instagram-clone"]||[]).push([[0],{69:function(e,t,c){},70:function(e,t,c){},79:function(e,t,c){},84:function(e,t,c){},85:function(e,t,c){},86:function(e,t,c){},92:function(e,t,c){},93:function(e,t,c){},95:function(e,t,c){"use strict";c.r(t);var n=c(2),a=c(18),s=c.n(a),i=(c(69),c(11)),o=(c(70),c(17)),l=c(7),r=function(e,t){if("SET_USER"===t.type)return Object(o.a)(Object(o.a)({},e),{},{user:t.payload});if("SET_PROFILE_PIC"===t.type)return Object(o.a)(Object(o.a)({},e),{},{userPhoto:t.payload});if("LOGOUT"===t.type)return Object(o.a)(Object(o.a)({},e),{},{userPhoto:void 0,user:""});if("SET_PROFILE_POST"===t.type)return Object(o.a)(Object(o.a)({},e),{},{profilePosts:t.payload});if("DELETE_PROFILE_POST"===t.type){var c=e.profilePosts.filter((function(e){return e.id!=t.payload}));return Object(o.a)(Object(o.a)({},e),{},{profilePosts:c})}},j=c(3),d=Object(n.createContext)(),u=function(e){var t=e.children,c=Object(n.useReducer)(r,{user:"",userPhoto:"",profilePosts:[]}),a=Object(l.a)(c,2),s=a[0],i=a[1];return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(d.Provider,{value:Object(o.a)(Object(o.a)({},s),{},{dispatcher:i}),children:t})})},b=c(29),m=(c(76),c(77),c(78),b.a.initializeApp({apiKey:"AIzaSyATr-D8ypnXXavnMcIDtHuVdqMOj7R7oQc",authDomain:"instagram-687d4.firebaseapp.com",projectId:"instagram-687d4",storageBucket:"instagram-687d4.appspot.com",messagingSenderId:"694535110658",appId:"1:694535110658:web:3a276d1eb90ada6c1ce71b"})),h=m.auth(),O=m.storage(),p=m.firestore(),f=(c(79),c(20)),x=function(){var e=Object(i.f)(),t=Object(n.useState)(""),c=Object(l.a)(t,2),a=c[0],s=c[1],o=Object(n.useState)(""),r=Object(l.a)(o,2),d=r[0],u=r[1],b=Object(n.useState)(!1),m=Object(l.a)(b,2),O=m[0],p=m[1];return Object(n.useEffect)((function(){O&&(e.push("/home"),p(!1))}),[O]),Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("div",{className:"signin-container",children:Object(j.jsxs)("div",{className:"signin",children:[Object(j.jsxs)("div",{className:"signin-top",children:[Object(j.jsx)("div",{className:"signin-logo",children:Object(j.jsx)("img",{className:"instagram-login-logo",src:"logo.png",alt:"instagram"})}),Object(j.jsxs)("div",{className:"signin-form",children:[Object(j.jsx)("input",{className:"input-field",placeholder:"Email",type:"email",value:a,onChange:function(e){return s(e.target.value)}}),Object(j.jsx)("input",{className:"input-field",placeholder:"Password",type:"password",value:d,onChange:function(e){return u(e.target.value)}}),Object(j.jsx)("button",{onClick:function(){console.log("d"),h.signInWithEmailAndPassword(a,d).then((function(){p(!0)})).catch((function(e){return alert(e)})),s(""),u("")},className:"btn",children:"Log In"})]})]}),Object(j.jsx)("div",{className:"signin-bottom",children:Object(j.jsxs)("h5",{children:["Don't have an account? ",Object(j.jsx)(f.b,{className:"navlink-style",exact:!0,to:"/signup",children:"Sign up"})]})})]})})})},g=(c(84),function(){var e=Object(i.f)(),t=Object(n.useState)(""),c=Object(l.a)(t,2),a=c[0],s=c[1],o=Object(n.useState)(""),r=Object(l.a)(o,2),d=r[0],u=r[1],b=Object(n.useState)(""),m=Object(l.a)(b,2),O=m[0],p=m[1];return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("div",{className:"signin-container",children:Object(j.jsxs)("div",{className:"signin",children:[Object(j.jsxs)("div",{className:"signin-top",children:[Object(j.jsxs)("div",{className:"signin-logo",children:[Object(j.jsx)("img",{className:"instagram-login-logo",src:"logo.png",alt:"instagram"}),Object(j.jsx)("h3",{children:"Sign up to see photos and videos from your friends."})]}),Object(j.jsxs)("div",{className:"signin-form",children:[Object(j.jsx)("input",{className:"input-field",placeholder:"Username",type:"text",value:a,onChange:function(e){return s(e.target.value)}}),Object(j.jsx)("input",{className:"input-field",placeholder:"Email",type:"email",value:d,onChange:function(e){return u(e.target.value)}}),Object(j.jsx)("input",{className:"input-field",placeholder:"Password",type:"password",value:O,onChange:function(e){return p(e.target.value)}}),Object(j.jsx)("button",{type:"submit",onClick:function(t){t.preventDefault(),h.createUserWithEmailAndPassword(d,O).then((function(e){return h.currentUser.updateProfile({displayName:a})})).catch((function(e){return alert(e)})),e.push("/home"),p(""),s(""),u("")},className:"btn",children:"Sign up"}),Object(j.jsxs)("h5",{children:["By signing up, you agree to our",Object(j.jsx)("span",{children:" Terms , Data Policy "}),"and ",Object(j.jsx)("span",{children:"Cookies Policy ."})]})]})]}),Object(j.jsx)("div",{className:"signin-bottom",children:Object(j.jsxs)("h5",{children:["Have an account? ",Object(j.jsx)(f.b,{className:"navlink-style",exact:!0,to:"/",children:"Log in"})]})})]})})})}),v=(c(85),c(128)),N=(c(86),c(127)),y=c(57),P=c.n(y),S=function(e){var t=Object(n.useContext)(d),c=t.user,a=t.dispatcher,s=e.item,i=e.postId,o=e.deletePost,r=s.userCaption,u=(s.userEmail,s.userName),m=s.userPostUrl,h=s.userProfileUrl,O=Object(n.useState)(0),f=Object(l.a)(O,2),x=f[0],g=f[1],y=Object(n.useState)(0),S=Object(l.a)(y,2),E=S[0],C=S[1],k=Object(n.useState)([]),F=Object(l.a)(k,2),w=F[0],I=F[1],L=Object(n.useState)(""),T=Object(l.a)(L,2),_=T[0],D=T[1],U=Object(n.useState)(!1),R=Object(l.a)(U,2),B=R[0],A=R[1],V=Object(n.useState)(!1),z=Object(l.a)(V,2),M=z[0],G=z[1];Object(n.useEffect)((function(){var e=p.collection("Post").doc(i).collection("Comments").orderBy("time","desc").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(e.data())})),t.length>2?A(!0):A(!1),I(t),G(!0)}));return function(){e()}}),[i]);var H=function(){var e=0;p.collection("Post").doc(i).collection("Likes").onSnapshot((function(t){t.forEach((function(t){e++})),C(e),G(!0)}))};return Object(n.useEffect)((function(){p.collection("Post").doc(i).collection("Likes").where("userName","==",c.email).onSnapshot((function(e){e.forEach((function(e){g(1),G(!0)}))})),H()})),Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("div",{className:"post",children:[Object(j.jsxs)("div",{className:"post-header",children:[Object(j.jsxs)("div",{className:"post-header-left",children:[""===h?Object(j.jsx)(v.a,{className:"post-header-avtar",alt:u,src:"/unknown"}):Object(j.jsx)(v.a,{className:"post-header-avtar",alt:u,src:h}),Object(j.jsx)("h5",{children:u})]}),Object(j.jsx)("div",{className:"post-header-right",children:o?Object(j.jsx)("button",{onClick:function(){p.collection("Post").doc(i).delete(),a({type:"DELETE_PROFILE_POST",payload:i})},children:"Delete Post"}):null})]}),Object(j.jsx)("div",{className:"post-photo",children:Object(j.jsx)("img",{className:"post-photo-style",src:m,alt:""})}),Object(j.jsxs)("div",{className:"post-footer",children:[M?Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("div",{children:[Object(j.jsx)(N.a,{defaultValue:x,max:1,onChange:function(){0===x&&(p.collection("Post").doc(i).collection("Likes").doc(c.email).set({userName:c.email}),H(),g(1)),1===x&&(p.collection("Post").doc(i).collection("Likes").doc(c.email).delete(),H(),g(0))},icon:Object(j.jsx)(P.a,{fontSize:"inherit"}),style:{color:"red"}}),Object(j.jsxs)("span",{children:[E," Likes"]})]})}):null,Object(j.jsxs)("h4",{children:[Object(j.jsx)("strong",{children:u}),"   ",r]})]}),Object(j.jsx)("div",{className:"show-comment",children:M?Object(j.jsx)(j.Fragment,{children:B?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{children:Object(j.jsxs)("button",{className:"comment-btn",onClick:function(){return A(!1)},children:["View all ",w.length," comments"]})}),w.slice(0,2).map((function(e){return Object(j.jsxs)("h5",{children:[Object(j.jsx)("strong",{children:e.userName})," ",e.comment]})}))]}):Object(j.jsxs)(j.Fragment,{children:[w.length>2?Object(j.jsx)("div",{children:Object(j.jsx)("button",{className:"comment-btn",onClick:function(){return A(!0)},children:"View less comments"})}):null,w.map((function(e){return Object(j.jsxs)("h5",{children:[Object(j.jsx)("strong",{children:e.userName})," ",e.comment]})}))]})}):null}),Object(j.jsxs)("div",{className:"post-comment",children:[Object(j.jsx)("input",{type:"text",className:"input-field",placeholder:"Add Comment",value:_,onChange:function(e){return D(e.target.value)}}),Object(j.jsx)("button",{className:"btn",onClick:function(){p.collection("Post").doc(i).collection("Comments").add({time:b.a.firestore.FieldValue.serverTimestamp(),comment:_,userName:c.displayName}).then((function(){D("")}))},children:"Post"})]})]})})},E=function(){var e=Object(n.useContext)(d),t=e.user,c=e.userPhoto,a=e.dispatcher,s=Object(n.useState)([]),o=Object(l.a)(s,2),r=o[0],u=o[1],b=Object(i.f)(),m=Object(n.useState)(!1),h=Object(l.a)(m,2),O=h[0],x=h[1];return Object(n.useEffect)((function(){!function(){if(t){var e=[];p.collection("Profile").onSnapshot((function(c){c.forEach((function(c){c.id===t.email&&e.push(c.data())}));try{a({type:"SET_PROFILE_PIC",payload:e[0].image})}catch(n){}}))}}(),function(){var e=[];p.collection("Post").orderBy("time","desc").onSnapshot((function(t){t.forEach((function(t){e.push({id:t.id,data:t.data()})})),u(e),x(!0)}))}()}),[]),t?Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("div",{className:"home",children:[Object(j.jsxs)("div",{className:"home-header",children:[Object(j.jsx)("div",{className:"home-logo",children:Object(j.jsx)("img",{className:"instagram-logo",src:"logo.png",alt:"instagram"})}),Object(j.jsx)("div",{className:"home-profile",children:Object(j.jsx)(f.b,{className:"profile-navlink",to:"/profile",children:void 0===c?Object(j.jsx)(v.a,{className:"avtar",alt:t.displayName,src:"/unknown"}):Object(j.jsx)(v.a,{className:"avtar",alt:t.displayName,src:c})})})]}),Object(j.jsx)("div",{className:"post-container",children:O?r.map((function(e){return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(S,{postId:e.id,item:e.data},e.id)})})):null})]})}):Object(j.jsx)(j.Fragment,{children:b.push("/")})},C=c(59),k=c.n(C),F=(c(92),c(126)),w=c(125),I=(c(93),function(e){var t,c=Object(n.useContext)(d),a=c.user,s=c.userPhoto,i=(c.dispatcher,e.postItem),o=Object(n.useState)(0),r=Object(l.a)(o,2),u=r[0],b=r[1];console.log(i),void 0==i&&(t=!0);return Object(n.useEffect)((function(){b(t?0:i.length)}),[i]),Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("div",{className:"profileBio",children:Object(j.jsxs)("div",{className:"profileBio-container",children:[Object(j.jsx)("div",{className:"profileBio-picture",children:void 0===s?Object(j.jsx)(v.a,{className:"profile-avtar",alt:a.displayName,src:"/unknown"}):Object(j.jsx)(v.a,{className:"profile-avtar",alt:a.displayName,src:s})}),Object(j.jsx)("div",{className:"profileBio-post",children:Object(j.jsxs)("h3",{children:[u," Posts"]})})]})})})});function L(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}}var T=Object(w.a)((function(e){return{paper:{position:"absolute",width:350,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}})),_=function(){var e=Object(n.useContext)(d),t=e.user,c=e.dispatcher,a=e.userPhoto,s=e.profilePosts,o=Object(n.useState)(!1),r=Object(l.a)(o,2),u=r[0],m=r[1],x=Object(n.useState)(""),g=Object(l.a)(x,2),v=g[0],N=g[1],y=Object(n.useState)(!1),P=Object(l.a)(y,2),E=P[0],C=P[1],w=Object(n.useState)(""),_=Object(l.a)(w,2),D=_[0],U=_[1],R=Object(n.useState)(""),B=Object(l.a)(R,2),A=B[0],V=B[1],z=Object(n.useState)(!1),M=Object(l.a)(z,2),G=M[0],H=M[1],J=Object(n.useState)(),W=Object(l.a)(J,2),X=(W[0],W[1]),q=Object(i.f)(),K=T(),Q=Object(n.useState)(L),Y=Object(l.a)(Q,1)[0],Z=function(){if(t){var e=[];p.collection("Profile").onSnapshot((function(n){n.forEach((function(c){c.id===t.email&&e.push(c.data())}));try{c({type:"SET_PROFILE_PIC",payload:e[0].image})}catch(a){}}))}},$=function(){p.collection("Post").where("userEmail","==",t.email).orderBy("time","desc").onSnapshot((function(e){var t=[];console.log("dobule"),e.forEach((function(e){t.push({id:e.id,data:e.data()})})),X(t),H(!0),c({type:"SET_PROFILE_POST",payload:t})}))},ee=[];return Object(n.useEffect)((function(){Z(),$()}),[]),t?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(F.a,{open:u,onClose:function(){m(!1)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:Object(j.jsx)("div",{style:Y,className:K.paper,children:Object(j.jsxs)("div",{className:"modal",children:[Object(j.jsx)("input",{type:"file",onChange:function(e){e.target.files[0]&&N(e.target.files[0])},className:"input-field"}),Object(j.jsx)("button",{className:"btn",onClick:function(){O.ref("ProfilePic/".concat(v.name)).put(v).on("state_changed",(function(){O.ref("ProfilePic").child(v.name).getDownloadURL().then((function(e){var c={image:e};p.collection("Profile").doc(t.email).set(c),Z(),m(!1)}))}))},children:"Done"})]})})}),Object(j.jsx)(F.a,{open:E,onClose:function(){C(!1)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:Object(j.jsx)("div",{style:Y,className:K.paper,children:Object(j.jsxs)("form",{className:"modal",onSubmit:function(e){e.preventDefault(),O.ref("Post/"+A.name).put(A).on("state_changed",(function(){O.ref("Post").child(A.name).getDownloadURL().then((function(e){var c;c=void 0===a?"":a;var n={time:b.a.firestore.FieldValue.serverTimestamp(),userCaption:D,userEmail:t.email,userName:t.displayName,userPostUrl:e,userProfileUrl:c};if(ee.push(n),console.log("this",ee),2===ee.length){var s=ee,i=Object(l.a)(s,1)[0];p.collection("Post").doc((new Date).getTime().toString()).set(i),U(""),V(""),C(!1),$(),ee=[]}}))}))},children:[Object(j.jsx)("input",{className:"input-field caption-field",placeholder:"Enter Caption",type:"text",value:D,onChange:function(e){return U(e.target.value)}}),Object(j.jsx)("input",{type:"file",className:"input-field",onChange:function(e){e.target.files[0]&&V(e.target.files[0])}}),Object(j.jsx)("button",{type:"submit",className:"btn",children:"Upload Post"})]})})}),Object(j.jsxs)("div",{className:"profile",children:[Object(j.jsxs)("div",{className:"profile-header",children:[Object(j.jsx)("div",{className:"profile-header-left",children:Object(j.jsxs)("h2",{children:["@",t.displayName]})}),Object(j.jsxs)("div",{className:"profile-header-right",children:[Object(j.jsx)(f.b,{className:"navlink-style navlink-div ",to:"/home",children:Object(j.jsx)(k.a,{className:"profile-header-icon"})}),Object(j.jsx)(f.b,{onClick:function(){h.signOut(),c({type:"LOGOUT"})},className:"navlink-style navlink-div",to:"/",children:Object(j.jsx)("h2",{children:"Log Out"})})]})]}),G?Object(j.jsx)(I,{postItem:s}):Object(j.jsx)(I,{}),Object(j.jsxs)("div",{className:"profile-update",children:[Object(j.jsx)("button",{onClick:function(){return m(!0)},className:"btn",children:"Change Profile Picture"}),Object(j.jsx)("button",{onClick:function(){return C(!0)},className:"btn",children:"Add Post"})]}),Object(j.jsx)("div",{className:"post-container",children:G?s.map((function(e){return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(S,{postId:e.id,deletePost:!0,item:e.data},e.id)})})):null})]})]}):Object(j.jsx)(j.Fragment,{children:q.push("/")})};var D=function(){var e=Object(n.useContext)(d),t=e.dispatcher;return e.user,Object(n.useEffect)((function(){h.onAuthStateChanged((function(e){t({type:"SET_USER",payload:e})}))}),[]),Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)(i.c,{children:[Object(j.jsx)(i.a,{exact:!0,path:"/",component:x}),Object(j.jsx)(i.a,{exact:!0,path:"/signup",component:g}),Object(j.jsx)(i.a,{exact:!0,path:"/home",component:E}),Object(j.jsx)(i.a,{exact:!0,path:"/profile",component:_})]})})};s.a.render(Object(j.jsx)(n.StrictMode,{children:Object(j.jsx)(f.a,{children:Object(j.jsx)(u,{children:Object(j.jsx)(D,{})})})}),document.getElementById("root"))}},[[95,1,2]]]);
//# sourceMappingURL=main.362c5f79.chunk.js.map